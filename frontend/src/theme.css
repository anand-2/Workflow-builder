/* Light mode â€“ Clean & Modern */
:root,
[data-mantine-color-scheme="light"] {
  /* Primary - Blue system */
  --app-primary: #0845a9;
  --app-primary-hover: #5A8BC4;
  --app-primary-light: #D6E6F2;
  --app-primary-active: #4A7BA7;
  --app-accent: #B9D7EA;

  /* Backgrounds & surfaces */
  --app-bg-page: #fafaff;
  --app-bg-canvas: #FFFFFF;
  --app-bg-card: #FFFFFF;
  --app-bg-sidebar: #fafaff;
  --app-bg-elevated: #FFFFFF;
  --app-bg-nav: #fafaff;

  /* Node colors */
  --app-node-default-bg: #FFFFFF;
  --app-node-default-border: #D6E6F2;
  --app-node-active-bg: #D6E6F2;
  --app-node-active-border: #0845a9;
  --app-node-success-bg: #B9D7EA;
  --app-node-success-border: #0845a9;
  --app-node-error-bg: #fafaff;
  --app-node-error-border: #0845a9;
  --app-node-ai-bg: #D6E6F2;
  --app-node-ai-border: #0845a9;
  --app-node-trigger-bg: #B9D7EA;
  --app-node-trigger-border: #0845a9;

  /* Edges */
  --app-edge-default: #B9D7EA;
  --app-edge-active: #0845a9;
  --app-edge-hover: #5A8BC4;

  /* Text */
  --app-text-primary: #27374D;
  --app-text-secondary: #526D82;
  --app-text-muted: #9DB2BF;
  --app-text-link: #0845a9;
  --app-text-link-hover: #5A8BC4;
  --app-text-link-active: #4A7BA7;

  /* Semantic */
  --app-success: #0845a9;
  --app-success-light: #D6E6F2;
  --app-warning: #B9D7EA;
  --app-warning-light: #fafaff;
  --app-error: #0845a9;
  --app-error-light: #fafaff;
  --app-info: #B9D7EA;
  --app-info-light: #fafaff;

  /* UI */
  --app-border: #D6E6F2;
  --app-border-hover: #B9D7EA;
  --app-divider: rgba(118, 159, 205, 0.2);
  --app-input-border: #D6E6F2;
  --app-input-focus: #0845a9;
  --app-disabled: #fafaff;
  --app-nav-border: rgba(214, 230, 242, 0.5);
  
  /* Shadows */
  --app-shadow-sm: 0 1px 2px 0 rgba(39, 55, 77, 0.05);
  --app-shadow-md: 0 4px 6px -1px rgba(39, 55, 77, 0.08), 0 2px 4px -2px rgba(39, 55, 77, 0.05);
  --app-shadow-lg: 0 10px 15px -3px rgba(39, 55, 77, 0.1), 0 4px 6px -4px rgba(39, 55, 77, 0.08);
  --app-shadow-xl: 0 20px 25px -5px rgba(39, 55, 77, 0.12), 0 8px 10px -6px rgba(39, 55, 77, 0.1);
  --app-shadow-nav: 0 20px 40px -15px rgba(39, 55, 77, 0.1);

  /* Header */
  --app-header-bg: #0845a9;
  --app-header-shadow: 0 4px 20px rgba(118, 159, 205, 0.15);
  --app-header-shimmer: none;
  --app-header-text: #FFFFFF;
  --app-header-text-shadow: 0 2px 10px rgba(39, 55, 77, 0.2);
  --app-header-btn-bg: rgba(255, 255, 255, 0.2);
  --app-header-btn-border: rgba(255, 255, 255, 0.3);
  --app-header-btn-bg-hover: rgba(255, 255, 255, 0.3);
  --app-header-btn-border-hover: rgba(255, 255, 255, 0.4);
  --app-header-btn-shadow: 0 6px 16px rgba(39, 55, 77, 0.2);
  --app-emoji-glow: drop-shadow(0 0 10px rgba(118, 159, 205, 0.7));
  --app-emoji-glow-active: drop-shadow(0 0 16px rgba(118, 159, 205, 0.9));

  /* Sidebar */
  --app-sidebar-gradient: #fafaff;
  --app-sidebar-shadow: 4px 0 12px rgba(39, 55, 77, 0.03);

  /* Nav Active State */
  --app-nav-active-bg: #0845a9;
  --app-nav-active-text: white;
  --app-nav-active-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);

  /* Step Cards */
  --app-step-accent: #0845a9;
  --app-step-hover-shadow: 0 6px 20px rgba(118, 159, 205, 0.15);

  /* Canvas */
  --app-canvas-grid: radial-gradient(circle, #D6E6F2 1px, transparent 1px);

  /* Nodes */
  --app-node-shadow: 0 4px 12px rgba(39, 55, 77, 0.08);
  --app-node-hover-shadow: 0 8px 24px rgba(118, 159, 205, 0.2);
  --app-node-selected-shadow: 0 0 0 4px rgba(118, 159, 205, 0.15), 0 8px 24px rgba(118, 159, 205, 0.25);
  --app-node-input-bg: #D6E6F2;
  --app-node-default-bg-gradient: #FFFFFF;
  --app-node-output-bg: #B9D7EA;
  --app-node-input-text: #27374D;
  --app-node-default-text: #27374D;
  --app-node-output-text: #27374D;

  /* Handles */
  --app-handle-border: white;
  --app-handle-shadow: 0 2px 8px rgba(39, 55, 77, 0.2);
  --app-handle-hover-shadow: 0 0 0 4px rgba(118, 159, 205, 0.2), 0 2px 8px rgba(39, 55, 77, 0.3);

  /* Minimap */
  --app-minimap-mask: rgba(118, 159, 205, 0.1);
}

/* Apply theme backgrounds */
[data-mantine-color-scheme="light"] .mantine-Card-root {
  background-color: var(--app-bg-card);
  box-shadow: var(--app-shadow-sm);
  border: 1px solid var(--app-border);
}

[data-mantine-color-scheme="light"] .mantine-Paper-root {
  background-color: var(--app-bg-card);
  border-color: var(--app-border);
}

/* Dark mode - Professional & Modern */
[data-mantine-color-scheme="dark"] {
  /* Primary - Modern Blue/Cyan */
  --app-primary: #0845a9;
  --app-primary-hover: #60A5FA;
  --app-primary-light: rgba(59, 130, 246, 0.15);
  --app-primary-active: #93C5FD;
  --app-accent: #06B6D4;

  /* Backgrounds - Layered depth */
  --app-bg-page: #0A0A0F;
  --app-bg-canvas: #0A0A0F;
  --app-bg-card: #1A1A24;
  --app-bg-sidebar: #0A0A0F;
  --app-bg-elevated: #25253A;
  --app-bg-nav: #1A1A24;

  /* Node colors - Clear differentiation */
  --app-node-default-bg: #1E1E2E;
  --app-node-default-border: #2A2A3E;
  --app-node-active-bg: #1E3A5F;
  --app-node-active-border: #0845a9;
  --app-node-success-bg: #1A3A2E;
  --app-node-success-border: #10B981;
  --app-node-error-bg: #3A2A1A;
  --app-node-error-border: #FB923C;
  --app-node-ai-bg: #1A2A3A;
  --app-node-ai-border: #06B6D4;
  --app-node-trigger-bg: #3A2A1A;
  --app-node-trigger-border: #F59E0B;

  /* Edges */
  --app-edge-default: #3A3A4E;
  --app-edge-active: #0845a9;
  --app-edge-hover: #60A5FA;

  /* Text - High contrast */
  --app-text-primary: #E5E7EB;
  --app-text-secondary: #9CA3AF;
  --app-text-muted: #6B7280;
  --app-text-link: #0845a9;
  --app-text-link-hover: #60A5FA;
  --app-text-link-active: #93C5FD;

  /* Semantic - Vibrant accents */
  --app-success: #10B981;
  --app-success-light: #1A3A2E;
  --app-warning: #F59E0B;
  --app-warning-light: #3A2A1A;
  --app-error: #FB923C;
  --app-error-light: #3A2A1A;
  --app-info: #06B6D4;
  --app-info-light: #1A2A3A;

  /* UI */
  --app-border: #2A2A3E;
  --app-border-hover: #3A3A4E;
  --app-divider: rgba(59, 130, 246, 0.15);
  --app-input-border: #2A2A3E;
  --app-input-focus: #0845a9;
  --app-disabled: #1A1A24;
  --app-nav-border: rgba(255, 255, 255, 0.08);
  
  /* Shadows - Subtle depth */
  --app-shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.5);
  --app-shadow-md: 0 4px 8px -2px rgba(0, 0, 0, 0.5), 0 2px 4px -2px rgba(0, 0, 0, 0.4);
  --app-shadow-lg: 0 12px 16px -4px rgba(0, 0, 0, 0.6), 0 4px 6px -4px rgba(0, 0, 0, 0.5);
  --app-shadow-xl: 0 24px 32px -8px rgba(0, 0, 0, 0.7), 0 8px 12px -6px rgba(0, 0, 0, 0.6);
  --app-shadow-nav: 0 8px 24px rgba(0, 0, 0, 0.4);

  /* Header */
  --app-header-bg-dark: #1A1A24;
  --app-header-shadow-dark: 0 2px 12px rgba(0, 0, 0, 0.4);
  --app-header-text-dark: #E5E7EB;
  --app-header-text-shadow-dark: none;
  --app-header-btn-bg-dark: #0845a9;
  --app-header-btn-border-dark: #0845a9;
  --app-header-btn-bg-hover-dark: #60A5FA;
  --app-header-btn-border-hover-dark: #60A5FA;

  /* Sidebar */
  --app-sidebar-gradient-dark: #0A0A0F;
  --app-sidebar-shadow-dark: 2px 0 8px rgba(0, 0, 0, 0.3);

  /* Canvas */
  --app-canvas-grid-dark: radial-gradient(circle, rgba(59, 130, 246, 0.08) 1px, transparent 1px);

  /* Nodes */
  --app-node-bg-dark: #1E1E2E;
  --app-node-border-dark: #2A2A3E;
  --app-node-shadow-dark: 0 4px 12px rgba(0, 0, 0, 0.4);
  --app-node-hover-shadow-dark: 0 8px 20px rgba(59, 130, 246, 0.25);
  --app-node-input-bg-dark: #1E1E2E;
  --app-node-default-bg-gradient-dark: #1E1E2E;
  --app-node-output-bg-dark: #1E1E2E;
}

[data-mantine-color-scheme="dark"] .mantine-Card-root {
  background-color: var(--app-bg-card);
  box-shadow: var(--app-shadow-sm);
  border: 1px solid var(--app-border);
}

[data-mantine-color-scheme="dark"] .mantine-Paper-root {
  background-color: var(--app-bg-card);
  border-color: var(--app-border);
}

.react-flow__renderer {
  background-color: var(--app-bg-canvas);
}

/* Smooth transitions */
* {
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}